# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ LawerApp Telegram Mini App

**–î–∞—Ç–∞:** 19 –æ–∫—Ç—è–±—Ä—è 2024  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–µ–ø–ª–æ–π —É—Å–ø–µ—à–µ–Ω  
**–í–µ—Ä—Å–∏—è:** 1.0.0

## üìã –ê–Ω–∞–ª–∏–∑ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–µ–ø–ª–æ—è
```
17:51:46 | ‚úì Generating static pages (7/7)
17:51:46 | ‚úì Exporting (2/2)
17:51:47 | Index dir contents: ['404.html', 'test', 'index.html', 'index.txt', 'manifest.json', 'miniapp-test', '404', 'globe.svg', 'favicon.ico', 'window.svg', 'vercel.svg', 'next.svg', '_next', 'file.svg']
17:51:48 | Deployment successfully completed üéâ
```

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–±–æ—Ä–∫–∏
- **–í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏:** 7.1s (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
- **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:** 7/7 —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã
- **–†–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞:** 102 kB (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)
- **–§–∞–π–ª—ã:** index.html, test/, miniapp-test/ —Å–æ–∑–¥–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ

## ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞
```json
{
  "ok": true,
  "result": {
    "id": 8208499008,
    "is_bot": true,
    "first_name": "–ú–∏–Ω–∏–ê–ø–ø –¥–ª—è —é—Ä–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π",
    "username": "miniappadvokat_bot",
    "can_join_groups": true,
    "can_read_all_group_messages": false,
    "supports_inline_queries": false,
    "can_connect_to_business": false,
    "has_main_web_app": false
  }
}
```

### ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
curl -X POST https://api.telegram.org/bot8208499008:AAHd9069cfFeM0OIqWrm86QyM0DEUBbV2z8/setMyCommands
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** `{"ok":true,"result":true}`

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
- `/start` - üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å LawerApp
- `/help` - ‚ùì –ü–æ–º–æ—â—å –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- `/info` - ‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ LawerApp
- `/consultation` - ‚öñÔ∏è –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–≤–æ–≤—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é
- `/dispute` - üìã –°–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–æ–≤–æ–π —Å–ø–æ—Ä
- `/documents` - üìÑ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Web App URL

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ –ø–∞–Ω–µ–ª–∏ TimeWeb Cloud.

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Web App URL
```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_APP_URL –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
curl -X POST https://api.telegram.org/bot8208499008:AAHd9069cfFeM0OIqWrm86QyM0DEUBbV2z8/setWebApp \
  -H "Content-Type: application/json" \
  -d '{"url": "https://YOUR_APP_URL.twc1.net"}'
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```bash
curl -s https://api.telegram.org/bot8208499008:AAHd9069cfFeM0OIqWrm86QyM0DEUBbV2z8/getWebApp
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Mini App

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
npm run dev

# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
open http://localhost:3000

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Mini App —Ñ—É–Ω–∫—Ü–∏–π
open http://localhost:3000/test
open http://localhost:3000/miniapp-test
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Telegram
1. **–û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞:** @miniappadvokat_bot
2. **–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É:** `/start`
3. **–ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É Mini App** (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞)
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
5. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏:**
   - –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
   - Telegram WebApp API
   - –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üì± –§—É–Ω–∫—Ü–∏–∏ Mini App

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- **/** - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- **/test** - –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å Telegram WebApp API
- **/miniapp-test** - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Mini App

### Telegram WebApp API
```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
if (window.Telegram?.WebApp) {
  const tg = window.Telegram.WebApp;
  
  // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const user = tg.initDataUnsafe?.user;
  
  // –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  tg.showAlert('–ü—Ä–∏–≤–µ—Ç –∏–∑ Mini App!');
  
  // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  tg.close();
}
```

### –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
```typescript
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ localStorage (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å v6.0)
localStorage.setItem('user_preferences', JSON.stringify({
  theme: 'dark',
  language: 'ru'
}));

// –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
const preferences = JSON.parse(
  localStorage.getItem('user_preferences') || '{}'
);
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```env
NODE_ENV=production
NEXT_PUBLIC_APP_URL=https://your-app.twc1.net
TELEGRAM_BOT_TOKEN=8208499008:AAHd9069cfFeM0OIqWrm86QyM0DEUBbV2z8
TELEGRAM_BOT_USERNAME=miniappadvokat_bot
S3_ENDPOINT=https://s3.twcstorage.ru
S3_REGION=ru-1
S3_ACCESS_KEY=HU9SKJH9UHKTA19WZ7I1
S3_SECRET_KEY=YvTaAAvMARx66APUUszIWqRhlH2sbDyTbe4K9xlc
S3_BUCKET_NAME=359416c4-a17c2034-cfcb-4343-baa2-855d4646e7eb
```

### Next.js –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  output: 'export',           // –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞
  trailingSlash: true,        // –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è TimeWeb Cloud
  images: {
    unoptimized: true,        // –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞
    domains: ['telegram.org', 'cdn.telegram.org'],
    formats: ['image/webp', 'image/avif'],
  },
  env: {
    CUSTOM_KEY: process.env.CUSTOM_KEY,
  },
};

module.exports = nextConfig;
```

## üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –°–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram Web App
```bash
# –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
TELEGRAM_BOT_TOKEN=8208499008:AAHd9069cfFeM0OIqWrm86QyM0DEUBbV2z8 \
TELEGRAM_WEBAPP_URL=https://YOUR_APP_URL.twc1.net \
npm run setup:telegram
```

### –°–∫—Ä–∏–ø—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã
npm run setup:local

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ polling —Ä–µ–∂–∏–º–µ
npm run bot:polling
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–∞
```bash
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
curl -s https://api.telegram.org/bot8208499008:AAHd9069cfFeM0OIqWrm86QyM0DEUBbV2z8/getMe

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞
curl -s https://api.telegram.org/bot8208499008:AAHd9069cfFeM0OIqWrm86QyM0DEUBbV2z8/getWebhookInfo
```

### –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
# –õ–æ–∫–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏
npm run dev

# –õ–æ–≥–∏ –±–æ—Ç–∞
npm run bot:polling

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏
npm run build
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –ü–æ–ª—É—á–∏—Ç—å URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ó–∞–π—Ç–∏ –≤ –ø–∞–Ω–µ–ª—å TimeWeb Cloud
- –ù–∞–π—Ç–∏ —Å–æ–∑–¥–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://app-name.twc1.net`)

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Web App URL
```bash
curl -X POST https://api.telegram.org/bot8208499008:AAHd9069cfFeM0OIqWrm86QyM0DEUBbV2z8/setWebApp \
  -H "Content-Type: application/json" \
  -d '{"url": "https://YOUR_ACTUAL_URL.twc1.net"}'
```

### 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Mini App
- –û—Ç–∫—Ä—ã—Ç—å @miniappadvokat_bot
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/start`
- –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É Mini App
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```bash
curl -X POST https://api.telegram.org/bot8208499008:AAHd9069cfFeM0OIqWrm86QyM0DEUBbV2z8/setWebhook \
  -H "Content-Type: application/json" \
  -d '{"url": "https://YOUR_APP_URL.twc1.net/api/telegram/webhook"}'
```

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **Telegram Bot API:** https://core.telegram.org/bots/api
- **Telegram WebApp API:** https://core.telegram.org/bots/webapps
- **Next.js Static Export:** https://nextjs.org/docs/advanced-features/static-html-export
- **TimeWeb Cloud:** https://timeweb.cloud

## üîç Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Mini App –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL –≤ setWebApp
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ HTTPS
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞: Telegram WebApp API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é Telegram WebApp
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å localStorage –≤–º–µ—Å—Ç–æ CloudStorage
3. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ API

### –ü—Ä–æ–±–ª–µ–º–∞: –î–µ–ø–ª–æ–π –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å next.config.js (output: 'export')
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–µ—Ç API routes
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å build –∫–æ–º–∞–Ω–¥—É –≤ package.json

---

**–ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** LawerApp Team  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É  
**–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Web App URL –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
