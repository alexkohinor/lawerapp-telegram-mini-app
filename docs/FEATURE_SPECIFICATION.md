# üìã –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π LawerApp Telegram Mini App

## üéØ –û–±–∑–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π

**LawerApp** - —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–∞–≤–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å Telegram, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏, –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–æ—Ä–∞–º–∏. –î–∞–Ω–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏.

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–π

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    LawerApp Functions                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ   AI Legal      ‚îÇ  ‚îÇ   Document      ‚îÇ  ‚îÇ   Dispute   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ   Assistant     ‚îÇ  ‚îÇ   Generator     ‚îÇ  ‚îÇ   Manager   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ             ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Chat Interface‚îÇ  ‚îÇ ‚Ä¢ Templates     ‚îÇ  ‚îÇ ‚Ä¢ Case      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ RAG System    ‚îÇ  ‚îÇ ‚Ä¢ AI Generation ‚îÇ  ‚îÇ   Tracking  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Multi-Agent   ‚îÇ  ‚îÇ ‚Ä¢ Customization ‚îÇ  ‚îÇ ‚Ä¢ Document  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Context Aware ‚îÇ  ‚îÇ ‚Ä¢ Validation    ‚îÇ  ‚îÇ   Management‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ   Payment       ‚îÇ  ‚îÇ   User          ‚îÇ  ‚îÇ   Analytics ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ   System        ‚îÇ  ‚îÇ   Management    ‚îÇ  ‚îÇ   & Reports ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ             ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Telegram Stars‚îÇ  ‚îÇ ‚Ä¢ Profile       ‚îÇ  ‚îÇ ‚Ä¢ Usage     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Russian       ‚îÇ  ‚îÇ ‚Ä¢ Preferences   ‚îÇ  ‚îÇ   Analytics ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ   Payments      ‚îÇ  ‚îÇ ‚Ä¢ History       ‚îÇ  ‚îÇ ‚Ä¢ Legal     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Subscriptions ‚îÇ  ‚îÇ ‚Ä¢ Notifications ‚îÇ  ‚îÇ   Reports   ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## ü§ñ 1. AI Legal Assistant

### **1.1 –ß–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å AI**

#### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç —Å AI-—é—Ä–∏—Å—Ç–æ–º
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
- –ú–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö AI
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RAG —Å–∏—Å—Ç–µ–º–æ–π –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –ø—Ä–∞–≤–æ–≤–æ–π –±–∞–∑–µ

#### **User Stories:**

**US-001: –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∏–º –ø—Ä–∞–≤–∞–º**
```
–ö–∞–∫ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å, —è —Ö–æ—á—É –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –ø–æ –≤–æ–∑–≤—Ä–∞—Ç—É —Ç–æ–≤–∞—Ä–∞,
—á—Ç–æ–±—ã –∑–Ω–∞—Ç—å —Å–≤–æ–∏ –ø—Ä–∞–≤–∞ –∏ –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- AI –ø–æ–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–±–ª–µ–º—ã
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ç—å–∏ –ó–ó–ü–ü
- –î–∞–µ—Ç –ø–æ—à–∞–≥–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –¥–µ–π—Å—Ç–≤–∏–π
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —à–∞–±–ª–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```

**US-002: –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ —Ç—Ä—É–¥–æ–≤–æ–º—É –ø—Ä–∞–≤—É**
```
–ö–∞–∫ —Ä–∞–±–æ—Ç–Ω–∏–∫, —è —Ö–æ—á—É –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –ø–æ —É–≤–æ–ª—å–Ω–µ–Ω–∏—é,
—á—Ç–æ–±—ã –∑–∞—â–∏—Ç–∏—Ç—å —Å–≤–æ–∏ –ø—Ä–∞–≤–∞.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–∏—Ç—É–∞—Ü–∏—é —É–≤–æ–ª—å–Ω–µ–Ω–∏—è
- –°—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –¢–ö –†–§
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã –∑–∞—â–∏—Ç—ã
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
```

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// src/components/features/ai/ChatInterface.tsx
interface ChatMessage {
  id: string;
  role: 'user' | 'assistant' | 'system';
  content: string;
  timestamp: Date;
  context?: LegalContext;
  sources?: LegalSource[];
  suggestions?: ChatSuggestion[];
}

interface LegalContext {
  area: LegalArea; // 'consumer', 'labor', 'civil', 'criminal'
  jurisdiction: 'russia';
  urgency: 'low' | 'medium' | 'high';
  complexity: 'simple' | 'medium' | 'complex';
}

interface ChatSuggestion {
  text: string;
  action: 'generate_document' | 'schedule_consultation' | 'search_precedent';
  metadata?: any;
}

export const ChatInterface: React.FC = () => {
  const [messages, setMessages] = useState<ChatMessage[]>([]);
  const [isLoading, setIsLoading] = useState(false);
  const [context, setContext] = useState<LegalContext | null>(null);

  const sendMessage = async (content: string) => {
    setIsLoading(true);
    
    try {
      const response = await aiService.getLegalConsultation({
        message: content,
        context,
        conversationHistory: messages.slice(-10) // –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π
      });
      
      const newMessage: ChatMessage = {
        id: generateId(),
        role: 'assistant',
        content: response.answer,
        timestamp: new Date(),
        context: response.context,
        sources: response.sources,
        suggestions: response.suggestions
      };
      
      setMessages(prev => [...prev, newMessage]);
    } catch (error) {
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="chat-interface">
      <ChatHeader context={context} />
      <ChatMessages messages={messages} />
      <ChatInput onSend={sendMessage} disabled={isLoading} />
      <ChatSuggestions suggestions={messages[messages.length - 1]?.suggestions} />
    </div>
  );
};
```

### **1.2 RAG —Å–∏—Å—Ç–µ–º–∞ (Retrieval-Augmented Generation)**

#### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü–æ–∏—Å–∫ –ø–æ –æ–±—à–∏—Ä–Ω–æ–π –ø—Ä–∞–≤–æ–≤–æ–π –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–∑–∞–≤–∏—Å–∏–º—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

#### **User Stories:**

**US-003: –ü–æ–∏—Å–∫ –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç–æ–≤**
```
–ö–∞–∫ —é—Ä–∏—Å—Ç, —è —Ö–æ—á—É –Ω–∞–π—Ç–∏ –ø–æ—Ö–æ–∂–∏–µ —Å—É–¥–µ–±–Ω—ã–µ –¥–µ–ª–∞,
—á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç–æ–≤.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –¥–µ–ª–∞ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ –¥–µ–ª–∞
- –°—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Å—É–¥–µ–±–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å (score)
```

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// src/lib/ai/rag-service.ts
export class RAGService {
  private vectorStore: TimeWebVectorStore;
  private embeddingService: EmbeddingService;
  private llmService: LLMService;

  async searchLegalKnowledge(query: string, context: LegalContext): Promise<SearchResult[]> {
    // 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —ç–º–±–µ–¥–¥–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–∞
    const queryEmbedding = await this.embeddingService.generateEmbedding(query);
    
    // 2. –ò—â–µ–º –ø–æ—Ö–æ–∂–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑–µ
    const similarDocs = await this.vectorStore.searchSimilar(queryEmbedding, {
      limit: 10,
      threshold: 0.7,
      filters: {
        legalArea: context.area,
        jurisdiction: context.jurisdiction
      }
    });
    
    // 3. –†–∞–Ω–∂–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
    const rankedResults = await this.rankResults(query, similarDocs);
    
    return rankedResults;
  }

  async generateContextualResponse(
    query: string, 
    searchResults: SearchResult[]
  ): Promise<ContextualResponse> {
    // –§–æ—Ä–º–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    const context = searchResults
      .map(result => result.content)
      .join('\n\n');
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    const response = await this.llmService.generateResponse({
      query,
      context,
      instructions: '–û—Ç–≤–µ—á–∞–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–∞–≤–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞'
    });
    
    return {
      answer: response.content,
      sources: searchResults.map(r => r.source),
      confidence: response.confidence
    };
  }
}
```

### **1.3 –ú–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**

#### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ AI –∞–≥–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π –ø—Ä–∞–≤–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫ –Ω—É–∂–Ω–æ–º—É –∞–≥–µ–Ω—Ç—É
- –ö–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏—è –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- –û–±—É—á–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤ –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### **User Stories:**

**US-004: –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è**
```
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –æ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
–ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –ø—Ä–∞–≤–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π –æ—Ç–≤–µ—Ç.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–±–ª–∞—Å—Ç—å –ø—Ä–∞–≤–∞
- –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∫ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –∞–≥–µ–Ω—Ç—É
- –ê–≥–µ–Ω—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –¥—Ä—É–≥–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤
```

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// src/lib/ai/agent-system.ts
export class MultiAgentSystem {
  private agents: Map<LegalArea, LegalAgent> = new Map();
  private orchestrator: AgentOrchestrator;

  constructor() {
    this.initializeAgents();
  }

  private initializeAgents(): void {
    this.agents.set('consumer', new ConsumerRightsAgent());
    this.agents.set('labor', new LaborLawAgent());
    this.agents.set('civil', new CivilLawAgent());
    this.agents.set('criminal', new CriminalLawAgent());
    this.agents.set('family', new FamilyLawAgent());
    this.agents.set('tax', new TaxLawAgent());
  }

  async processQuery(query: string, context: LegalContext): Promise<AgentResponse> {
    // 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ–±–ª–∞—Å—Ç—å –ø—Ä–∞–≤–∞
    const legalArea = await this.classifyLegalArea(query);
    
    // 2. –í—ã–±–∏—Ä–∞–µ–º –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –∞–≥–µ–Ω—Ç–∞
    const agent = this.agents.get(legalArea);
    
    if (!agent) {
      return await this.handleUnknownArea(query);
    }
    
    // 3. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –∞–≥–µ–Ω—Ç–∞
    const response = await agent.processQuery(query, context);
    
    // 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–∞ –ª–∏ –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏—è
    if (response.requiresCollaboration) {
      return await this.orchestrateCollaboration(query, response);
    }
    
    return response;
  }

  private async orchestrateCollaboration(
    query: string, 
    initialResponse: AgentResponse
  ): Promise<AgentResponse> {
    const collaboratingAgents = await this.orchestrator.identifyCollaborators(
      query, 
      initialResponse
    );
    
    const collaborativeResponse = await this.orchestrator.coordinateAgents(
      query,
      collaboratingAgents
    );
    
    return collaborativeResponse;
  }
}

// –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç –¥–ª—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–∞–≤
export class ConsumerRightsAgent extends LegalAgent {
  protected legalArea: LegalArea = 'consumer';
  protected knowledgeBase: string[] = [
    '–ó–ó–ü–ü (–ó–∞–∫–æ–Ω –æ –∑–∞—â–∏—Ç–µ –ø—Ä–∞–≤ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π)',
    '–ì–ö –†–§ (–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–π –∫–æ–¥–µ–∫—Å)',
    '–°—É–¥–µ–±–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –ø–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∏–º —Å–ø–æ—Ä–∞–º'
  ];

  async processQuery(query: string, context: LegalContext): Promise<AgentResponse> {
    // –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–∞–≤
    const analysis = await this.analyzeConsumerIssue(query);
    
    if (analysis.involvesMultipleAreas) {
      return {
        answer: analysis.answer,
        requiresCollaboration: true,
        suggestedCollaborators: ['civil', 'administrative'],
        confidence: analysis.confidence
      };
    }
    
    return {
      answer: analysis.answer,
      requiresCollaboration: false,
      confidence: analysis.confidence
    };
  }
}
```

---

## üìÑ 2. Document Generator

### **2.1 –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∞–≤–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**

#### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–æ–≤
- AI-–∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å–∏—Ç—É–∞—Ü–∏—é
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É
- –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã (PDF, DOCX, TXT)

#### **User Stories:**

**US-005: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ—Ç–µ–Ω–∑–∏–∏**
```
–ö–∞–∫ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å, —è —Ö–æ—á—É —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ—Ç–µ–Ω–∑–∏—é –∫ –ø—Ä–æ–¥–∞–≤—Ü—É,
—á—Ç–æ–±—ã —Ñ–æ—Ä–º–∞–ª—å–Ω–æ –∑–∞—è–≤–∏—Ç—å –æ —Å–≤–æ–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- –°–∏—Å—Ç–µ–º–∞ —Å–æ–±–∏—Ä–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–µ—Ç–µ–Ω–∑–∏—é –ø–æ —à–∞–±–ª–æ–Ω—É
- –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å–∏—Ç—É–∞—Ü–∏—é
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤ PDF
```

**US-006: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—Ä—É–¥–æ–≤–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞**
```
–ö–∞–∫ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—å, —è —Ö–æ—á—É —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä,
—á—Ç–æ–±—ã —Å–æ–±–ª—é—Å—Ç–∏ –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¢–ö –†–§.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- –°–∏—Å—Ç–µ–º–∞ —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ —Ä–∞–±–æ—Ç–Ω–∏–∫–µ –∏ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–æ–≥–æ–≤–æ—Ä —Å —É—á–µ—Ç–æ–º –¢–ö –†–§
- –í–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—É–Ω–∫—Ç—ã
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// src/lib/documents/document-generator.ts
export class DocumentGenerator {
  private templateEngine: TemplateEngine;
  private aiService: AIService;
  private validator: DocumentValidator;

  async generateDocument(
    templateId: string, 
    data: DocumentData, 
    options: GenerationOptions
  ): Promise<GeneratedDocument> {
    // 1. –ó–∞–≥—Ä—É–∂–∞–µ–º —à–∞–±–ª–æ–Ω
    const template = await this.templateEngine.loadTemplate(templateId);
    
    // 2. –í–∞–ª–∏–¥–∏—Ä—É–µ–º –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    await this.validator.validateData(template, data);
    
    // 3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç —Å –ø–æ–º–æ—â—å—é AI
    const content = await this.aiService.generateDocumentContent({
      template,
      data,
      options
    });
    
    // 4. –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
    const document = await this.templateEngine.renderDocument(template, content);
    
    // 5. –í–∞–ª–∏–¥–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    await this.validator.validateDocument(document);
    
    return {
      id: generateId(),
      content: document,
      metadata: {
        templateId,
        generatedAt: new Date(),
        version: template.version
      }
    };
  }

  async generatePretenziya(data: PretenziyaData): Promise<GeneratedDocument> {
    return await this.generateDocument('pretenziya', data, {
      includeLegalReferences: true,
      format: 'formal',
      language: 'ru'
    });
  }

  async generateLaborContract(data: LaborContractData): Promise<GeneratedDocument> {
    return await this.generateDocument('labor_contract', data, {
      includeLegalReferences: true,
      format: 'legal',
      language: 'ru',
      complianceCheck: true
    });
  }
}

// –®–∞–±–ª–æ–Ω –ø—Ä–µ—Ç–µ–Ω–∑–∏–∏
export const PRETENZIYA_TEMPLATE = {
  id: 'pretenziya',
  name: '–ü—Ä–µ—Ç–µ–Ω–∑–∏—è –∫ –ø—Ä–æ–¥–∞–≤—Ü—É',
  version: '1.0',
  sections: [
    {
      id: 'header',
      type: 'static',
      content: '–ü–†–ï–¢–ï–ù–ó–ò–Ø'
    },
    {
      id: 'recipient',
      type: 'dynamic',
      field: 'seller_info',
      template: '–ü—Ä–æ–¥–∞–≤—Ü—É: {{company_name}}\n–ê–¥—Ä–µ—Å: {{address}}'
    },
    {
      id: 'sender',
      type: 'dynamic',
      field: 'buyer_info',
      template: '–û—Ç: {{full_name}}\n–ê–¥—Ä–µ—Å: {{address}}\n–¢–µ–ª–µ—Ñ–æ–Ω: {{phone}}'
    },
    {
      id: 'main_content',
      type: 'ai_generated',
      prompt: '–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –æ—Å–Ω–æ–≤–Ω—É—é —á–∞—Å—Ç—å –ø—Ä–µ—Ç–µ–Ω–∑–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–ª–µ–¥—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö: {{issue_description}}'
    },
    {
      id: 'requirements',
      type: 'dynamic',
      field: 'requirements',
      template: '–¢—Ä–µ–±—É—é: {{requirements}}'
    },
    {
      id: 'legal_basis',
      type: 'static',
      content: '–ü—Ä–∞–≤–æ–≤—ã–µ –æ—Å–Ω–æ–≤–∞–Ω–∏—è: –ó–ó–ü–ü –†–§, –ì–ö –†–§'
    }
  ]
};
```

### **2.2 –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**

#### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –æ—Ç AI
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤

#### **User Stories:**

**US-007: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞**
```
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç,
—á—Ç–æ–±—ã –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —É–¥–æ–±–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
- AI –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É
- –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏—è
```

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// src/components/features/documents/DocumentEditor.tsx
export const DocumentEditor: React.FC<DocumentEditorProps> = ({ document, onSave }) => {
  const [content, setContent] = useState(document.content);
  const [suggestions, setSuggestions] = useState<AISuggestion[]>([]);
  const [isValidating, setIsValidating] = useState(false);

  const handleContentChange = useCallback(async (newContent: string) => {
    setContent(newContent);
    
    // –ü–æ–ª—É—á–∞–µ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ—Ç AI
    const aiSuggestions = await aiService.getDocumentSuggestions(newContent);
    setSuggestions(aiSuggestions);
  }, []);

  const validateDocument = async () => {
    setIsValidating(true);
    
    try {
      const validation = await documentValidator.validate(content);
      
      if (!validation.isValid) {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏
        showValidationErrors(validation.errors);
      }
    } finally {
      setIsValidating(false);
    }
  };

  return (
    <div className="document-editor">
      <EditorToolbar 
        onSave={() => onSave(content)}
        onValidate={validateDocument}
        isValidating={isValidating}
      />
      
      <DocumentContent 
        content={content}
        onChange={handleContentChange}
        suggestions={suggestions}
      />
      
      <AISuggestions 
        suggestions={suggestions}
        onApply={(suggestion) => applySuggestion(suggestion)}
      />
    </div>
  );
};
```

---

## ‚öñÔ∏è 3. Dispute Manager

### **3.1 –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–æ—Ä–∞–º–∏**

#### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–ø–æ—Ä–æ–≤ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–ø–æ—Ä–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –ø–æ —Å–ø–æ—Ä—É
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö

#### **User Stories:**

**US-008: –°–æ–∑–¥–∞–Ω–∏–µ —Å–ø–æ—Ä–∞**
```
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–ø–æ—Ä,
—á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ—à–µ–Ω–∏—è –ø—Ä–∞–≤–æ–≤–æ–π –ø—Ä–æ–±–ª–µ–º—ã.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- –°–∏—Å—Ç–µ–º–∞ —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä —Å–ø–æ—Ä–∞
- –°–æ–∑–¥–∞–µ—Ç –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```

**US-009: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞**
```
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Å–≤–æ–µ–≥–æ —Å–ø–æ—Ä–∞,
—á—Ç–æ–±—ã –±—ã—Ç—å –≤ –∫—É—Ä—Å–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// src/lib/disputes/dispute-manager.ts
export class DisputeManager {
  private disputeRepository: DisputeRepository;
  private notificationService: NotificationService;
  private documentService: DocumentService;

  async createDispute(data: CreateDisputeData): Promise<Dispute> {
    // 1. –í–∞–ª–∏–¥–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ
    await this.validateDisputeData(data);
    
    // 2. –°–æ–∑–¥–∞–µ–º —Å–ø–æ—Ä
    const dispute = await this.disputeRepository.create({
      id: generateId(),
      title: data.title,
      description: data.description,
      category: data.category,
      priority: data.priority,
      status: 'created',
      createdAt: new Date(),
      userId: data.userId
    });
    
    // 3. –°–æ–∑–¥–∞–µ–º –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π
    const actionPlan = await this.createActionPlan(dispute);
    dispute.actionPlan = actionPlan;
    
    // 4. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    await this.setupNotifications(dispute);
    
    // 5. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
    await this.generateInitialDocuments(dispute);
    
    return dispute;
  }

  async updateDisputeStatus(
    disputeId: string, 
    status: DisputeStatus, 
    comment?: string
  ): Promise<void> {
    const dispute = await this.disputeRepository.findById(disputeId);
    
    if (!dispute) {
      throw new Error('Dispute not found');
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
    dispute.status = status;
    dispute.updatedAt = new Date();
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
    if (comment) {
      dispute.comments.push({
        id: generateId(),
        text: comment,
        author: 'system',
        timestamp: new Date()
      });
    }
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
    await this.disputeRepository.update(dispute);
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    await this.notificationService.notifyStatusChange(dispute, status);
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π
    await this.updateActionPlan(dispute);
  }

  private async createActionPlan(dispute: Dispute): Promise<ActionPlan> {
    const actions = await aiService.generateActionPlan({
      disputeType: dispute.category,
      description: dispute.description,
      priority: dispute.priority
    });
    
    return {
      id: generateId(),
      disputeId: dispute.id,
      actions: actions.map(action => ({
        ...action,
        id: generateId(),
        status: 'pending',
        dueDate: this.calculateDueDate(action.type, dispute.priority)
      })),
      createdAt: new Date()
    };
  }
}

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ø–æ—Ä–∞–º–∏
export const DisputeManager: React.FC = () => {
  const [disputes, setDisputes] = useState<Dispute[]>([]);
  const [selectedDispute, setSelectedDispute] = useState<Dispute | null>(null);

  return (
    <div className="dispute-manager">
      <DisputeList 
        disputes={disputes}
        onSelect={setSelectedDispute}
        onCreateNew={() => setShowCreateModal(true)}
      />
      
      {selectedDispute && (
        <DisputeDetails 
          dispute={selectedDispute}
          onUpdate={handleDisputeUpdate}
        />
      )}
      
      <CreateDisputeModal 
        isOpen={showCreateModal}
        onClose={() => setShowCreateModal(false)}
        onSubmit={handleCreateDispute}
      />
    </div>
  );
};
```

### **3.2 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –ø–æ —Å–ø–æ—Ä—É**

#### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ü–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

#### **User Stories:**

**US-010: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**
```
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ —Å–ø–æ—Ä—É,
—á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤
- –î–æ–∫—É–º–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä—É—é—Ç—Å—è
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
```

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// src/lib/documents/dispute-document-manager.ts
export class DisputeDocumentManager {
  private fileStorage: FileStorage;
  private aiService: AIService;
  private documentRepository: DocumentRepository;

  async uploadDocument(
    disputeId: string, 
    file: File, 
    metadata: DocumentMetadata
  ): Promise<DisputeDocument> {
    // 1. –í–∞–ª–∏–¥–∏—Ä—É–µ–º —Ñ–∞–π–ª
    await this.validateFile(file);
    
    // 2. –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–∞–π–ª
    const uploadResult = await this.fileStorage.upload(file, {
      disputeId,
      category: metadata.category
    });
    
    // 3. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å –ø–æ–º–æ—â—å—é AI
    const analysis = await this.aiService.analyzeDocument({
      content: uploadResult.content,
      type: file.type,
      disputeId
    });
    
    // 4. –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
    const document = await this.documentRepository.create({
      id: generateId(),
      disputeId,
      filename: file.name,
      fileUrl: uploadResult.url,
      category: analysis.category,
      tags: analysis.tags,
      summary: analysis.summary,
      uploadedAt: new Date()
    });
    
    return document;
  }

  async searchDocuments(
    disputeId: string, 
    query: string
  ): Promise<DisputeDocument[]> {
    // –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
    const results = await this.aiService.searchDocuments({
      disputeId,
      query,
      limit: 20
    });
    
    return results;
  }

  private async validateFile(file: File): Promise<void> {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
    if (file.size > 10 * 1024 * 1024) { // 10MB
      throw new Error('File too large');
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø —Ñ–∞–π–ª–∞
    const allowedTypes = [
      'application/pdf',
      'image/jpeg',
      'image/png',
      'application/msword',
      'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
    ];
    
    if (!allowedTypes.includes(file.type)) {
      throw new Error('Unsupported file type');
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –≤–∏—Ä—É—Å—ã
    const isClean = await this.scanFile(file);
    if (!isClean) {
      throw new Error('File contains malware');
    }
  }
}
```

---

## üí≥ 4. Payment System

### **4.1 –†–æ—Å—Å–∏–π—Å–∫–∏–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã**

#### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- Telegram Stars (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–±)
- –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∫–∞—Ä—Ç—ã —á–µ—Ä–µ–∑ –ÆKassa
- –°–ë–ü (–°–∏—Å—Ç–µ–º–∞ –±—ã—Å—Ç—Ä—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π)
- –ÆMoney, QIWI
- –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã

#### **User Stories:**

**US-011: –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Telegram Stars**
```
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –æ–ø–ª–∞—Ç–∏—Ç—å —É—Å–ª—É–≥—É —á–µ—Ä–µ–∑ Telegram Stars,
—á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –≤–∞–ª—é—Ç—É Telegram.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Stars API
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ–∫–∞
```

**US-012: –û–ø–ª–∞—Ç–∞ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç–æ–π**
```
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –æ–ø–ª–∞—Ç–∏—Ç—å —É—Å–ª—É–≥—É –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç–æ–π,
—á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–≤—ã—á–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ÆKassa
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Visa, MasterCard, –ú–ò–†
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- 3D Secure –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// src/lib/payments/payment-manager.ts
export class PaymentManager {
  private telegramStarsService: TelegramStarsService;
  private yooKassaService: YooKassaService;
  private sbpService: SBPService;
  private yooMoneyService: YooMoneyService;
  private qiwiService: QIWIService;

  async processPayment(
    paymentData: PaymentData
  ): Promise<PaymentResult> {
    switch (paymentData.method) {
      case 'telegram_stars':
        return await this.processTelegramStarsPayment(paymentData);
      case 'yookassa':
        return await this.processYooKassaPayment(paymentData);
      case 'sbp':
        return await this.processSBPPayment(paymentData);
      case 'yoomoney':
        return await this.processYooMoneyPayment(paymentData);
      case 'qiwi':
        return await this.processQIWIPayment(paymentData);
      default:
        throw new Error('Unsupported payment method');
    }
  }

  private async processTelegramStarsPayment(
    paymentData: PaymentData
  ): Promise<PaymentResult> {
    try {
      // –°–æ–∑–¥–∞–µ–º –∏–Ω–≤–æ–π—Å –≤ Telegram
      const invoice = await this.telegramStarsService.createInvoice({
        title: paymentData.description,
        description: paymentData.description,
        payload: paymentData.orderId,
        provider_token: process.env.TELEGRAM_STARS_PROVIDER_TOKEN,
        currency: 'XTR', // Telegram Stars
        prices: [{
          label: paymentData.description,
          amount: paymentData.amount
        }]
      });

      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–Ω–≤–æ–π—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
      await this.telegramStarsService.sendInvoice(
        paymentData.userId, 
        invoice
      );

      return {
        success: true,
        paymentId: invoice.id,
        status: 'pending',
        redirectUrl: null
      };
    } catch (error) {
      return {
        success: false,
        error: error.message,
        status: 'failed'
      };
    }
  }

  private async processYooKassaPayment(
    paymentData: PaymentData
  ): Promise<PaymentResult> {
    try {
      // –°–æ–∑–¥–∞–µ–º –ø–ª–∞—Ç–µ–∂ –≤ –ÆKassa
      const payment = await this.yooKassaService.createPayment({
        amount: {
          value: paymentData.amount.toFixed(2),
          currency: 'RUB'
        },
        confirmation: {
          type: 'redirect',
          return_url: `${process.env.APP_URL}/payment/success`
        },
        description: paymentData.description,
        metadata: {
          orderId: paymentData.orderId,
          userId: paymentData.userId
        }
      });

      return {
        success: true,
        paymentId: payment.id,
        status: 'pending',
        redirectUrl: payment.confirmation.confirmation_url
      };
    } catch (error) {
      return {
        success: false,
        error: error.message,
        status: 'failed'
      };
    }
  }
}

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã
export const PaymentMethodSelector: React.FC<PaymentMethodSelectorProps> = ({
  onSelect,
  selectedMethod
}) => {
  const paymentMethods = [
    {
      id: 'telegram_stars',
      name: 'Telegram Stars',
      description: '–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤–∞–ª—é—Ç–∞ Telegram',
      icon: '‚≠ê',
      available: true
    },
    {
      id: 'yookassa',
      name: '–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞',
      description: 'Visa, MasterCard, –ú–ò–†',
      icon: 'üí≥',
      available: true
    },
    {
      id: 'sbp',
      name: '–°–ë–ü',
      description: '–°–∏—Å—Ç–µ–º–∞ –±—ã—Å—Ç—Ä—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π',
      icon: 'üè¶',
      available: true
    },
    {
      id: 'yoomoney',
      name: '–ÆMoney',
      description: '–Ø–Ω–¥–µ–∫—Å.–î–µ–Ω—å–≥–∏',
      icon: 'üí∞',
      available: true
    },
    {
      id: 'qiwi',
      name: 'QIWI',
      description: '–ü–æ–ø—É–ª—è—Ä–Ω—ã–π –≤ –†–æ—Å—Å–∏–∏',
      icon: 'üì±',
      available: true
    }
  ];

  return (
    <div className="payment-method-selector">
      <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</h3>
      <div className="payment-methods">
        {paymentMethods.map(method => (
          <PaymentMethodCard
            key={method.id}
            method={method}
            isSelected={selectedMethod === method.id}
            onSelect={() => onSelect(method.id)}
          />
        ))}
      </div>
    </div>
  );
};
```

### **4.2 –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫**

#### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ì–∏–±–∫–∏–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### **User Stories:**

**US-013: –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –ø—Ä–µ–º–∏—É–º**
```
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –æ—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –ø—Ä–µ–º–∏—É–º,
—á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- –î–æ—Å—Ç—É–ø–Ω—ã —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–¥–ª–µ–Ω–∏–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏
```

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// src/lib/subscriptions/subscription-manager.ts
export class SubscriptionManager {
  private subscriptionRepository: SubscriptionRepository;
  private paymentManager: PaymentManager;
  private notificationService: NotificationService;

  async createSubscription(
    userId: string, 
    planId: string, 
    paymentMethod: PaymentMethod
  ): Promise<Subscription> {
    const plan = await this.getPlan(planId);
    
    // –°–æ–∑–¥–∞–µ–º –ø–æ–¥–ø–∏—Å–∫—É
    const subscription = await this.subscriptionRepository.create({
      id: generateId(),
      userId,
      planId,
      status: 'active',
      startDate: new Date(),
      endDate: this.calculateEndDate(plan.billingCycle),
      autoRenew: true,
      paymentMethod
    });

    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–π –ø–ª–∞—Ç–µ–∂
    const paymentResult = await this.paymentManager.processPayment({
      userId,
      amount: plan.price,
      method: paymentMethod,
      description: `–ü–æ–¥–ø–∏—Å–∫–∞ ${plan.name}`,
      orderId: subscription.id
    });

    if (!paymentResult.success) {
      subscription.status = 'failed';
      await this.subscriptionRepository.update(subscription);
      throw new Error('Payment failed');
    }

    // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ
    await this.setupAutoRenewal(subscription);

    return subscription;
  }

  async checkSubscriptionStatus(userId: string): Promise<SubscriptionStatus> {
    const subscription = await this.subscriptionRepository.findActiveByUserId(userId);
    
    if (!subscription) {
      return { hasActiveSubscription: false };
    }

    const now = new Date();
    const isExpired = subscription.endDate < now;
    
    if (isExpired && subscription.autoRenew) {
      // –ü—ã—Ç–∞–µ–º—Å—è –ø—Ä–æ–¥–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
      await this.renewSubscription(subscription);
    }

    return {
      hasActiveSubscription: !isExpired,
      subscription,
      features: this.getAvailableFeatures(subscription.planId)
    };
  }

  private async renewSubscription(subscription: Subscription): Promise<void> {
    try {
      const plan = await this.getPlan(subscription.planId);
      
      const paymentResult = await this.paymentManager.processPayment({
        userId: subscription.userId,
        amount: plan.price,
        method: subscription.paymentMethod,
        description: `–ü—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ ${plan.name}`,
        orderId: subscription.id
      });

      if (paymentResult.success) {
        subscription.endDate = this.calculateEndDate(plan.billingCycle);
        await this.subscriptionRepository.update(subscription);
        
        await this.notificationService.sendRenewalSuccess(subscription);
      } else {
        subscription.status = 'expired';
        await this.subscriptionRepository.update(subscription);
        
        await this.notificationService.sendRenewalFailed(subscription);
      }
    } catch (error) {
      subscription.status = 'expired';
      await this.subscriptionRepository.update(subscription);
    }
  }
}
```

---

## üë§ 5. User Management

### **5.1 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º**

#### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏

#### **User Stories:**

**US-014: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è**
```
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å,
—á—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –ª–∏—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–µ–¥–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
```

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// src/components/features/user/UserProfile.tsx
export const UserProfile: React.FC = () => {
  const [user, setUser] = useState<User | null>(null);
  const [isEditing, setIsEditing] = useState(false);
  const [formData, setFormData] = useState<UserFormData>({});

  const handleSave = async () => {
    try {
      const updatedUser = await userService.updateProfile(user.id, formData);
      setUser(updatedUser);
      setIsEditing(false);
      showSuccessMessage('–ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω');
    } catch (error) {
      showErrorMessage('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è');
    }
  };

  return (
    <div className="user-profile">
      <ProfileHeader user={user} />
      
      {isEditing ? (
        <ProfileEditForm 
          user={user}
          formData={formData}
          onChange={setFormData}
          onSave={handleSave}
          onCancel={() => setIsEditing(false)}
        />
      ) : (
        <ProfileView 
          user={user}
          onEdit={() => setIsEditing(true)}
        />
      )}
      
      <ProfileSettings user={user} />
      <ActivityHistory userId={user?.id} />
    </div>
  );
};
```

### **5.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**

#### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –í—ã–±–æ—Ä –∫–∞–Ω–∞–ª–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

#### **User Stories:**

**US-015: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
```
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —è —Ö–æ—á—É –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è,
—á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–Ω–∞–ª–æ–≤ (Telegram, email)
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// src/lib/notifications/notification-manager.ts
export class NotificationManager {
  private notificationRepository: NotificationRepository;
  private telegramService: TelegramService;
  private emailService: EmailService;

  async updateNotificationSettings(
    userId: string, 
    settings: NotificationSettings
  ): Promise<void> {
    await this.notificationRepository.updateSettings(userId, settings);
  }

  async sendNotification(
    userId: string, 
    notification: Notification
  ): Promise<void> {
    const settings = await this.notificationRepository.getSettings(userId);
    
    if (!settings.enabled) {
      return;
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    if (!this.shouldSendNotification(notification, settings)) {
      return;
    }

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã
    const promises = [];

    if (settings.channels.telegram && notification.type !== 'email_only') {
      promises.push(this.telegramService.sendMessage(userId, notification));
    }

    if (settings.channels.email && notification.type !== 'telegram_only') {
      promises.push(this.emailService.sendEmail(userId, notification));
    }

    await Promise.all(promises);
  }

  private shouldSendNotification(
    notification: Notification, 
    settings: NotificationSettings
  ): boolean {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    if (!settings.types[notification.type]) {
      return false;
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Ä–µ–º—è (–Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–æ—á—å—é, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
    if (settings.quietHours.enabled) {
      const now = new Date();
      const hour = now.getHours();
      
      if (hour >= settings.quietHours.start && hour <= settings.quietHours.end) {
        return notification.priority === 'high';
      }
    }

    return true;
  }
}
```

---

## üìä 6. Analytics & Reports

### **6.1 –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

#### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê–Ω–∞–ª–∏–∑ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –û—Ç—á–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

#### **User Stories:**

**US-016: –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏**
```
–ö–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, —è —Ö–æ—á—É –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è,
—á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
```

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// src/lib/analytics/analytics-service.ts
export class AnalyticsService {
  private analyticsRepository: AnalyticsRepository;
  private eventTracker: EventTracker;

  async trackEvent(
    userId: string, 
    event: AnalyticsEvent
  ): Promise<void> {
    const analyticsEvent = {
      id: generateId(),
      userId,
      eventType: event.type,
      eventData: event.data,
      timestamp: new Date(),
      sessionId: event.sessionId,
      userAgent: event.userAgent,
      ip: event.ip
    };

    await this.analyticsRepository.create(analyticsEvent);
  }

  async getUsageAnalytics(
    period: AnalyticsPeriod
  ): Promise<UsageAnalytics> {
    const events = await this.analyticsRepository.getEventsByPeriod(period);
    
    return {
      totalUsers: await this.getTotalUsers(period),
      activeUsers: await this.getActiveUsers(period),
      newUsers: await this.getNewUsers(period),
      retention: await this.getRetentionRate(period),
      popularFeatures: await this.getPopularFeatures(events),
      userJourney: await this.getUserJourney(events),
      conversionFunnel: await this.getConversionFunnel(events)
    };
  }

  async getLegalAnalytics(
    period: AnalyticsPeriod
  ): Promise<LegalAnalytics> {
    return {
      totalConsultations: await this.getTotalConsultations(period),
      popularLegalAreas: await this.getPopularLegalAreas(period),
      averageConsultationTime: await this.getAverageConsultationTime(period),
      documentGenerationStats: await this.getDocumentGenerationStats(period),
      disputeResolutionStats: await this.getDisputeResolutionStats(period)
    };
  }
}

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
export const AnalyticsDashboard: React.FC = () => {
  const [analytics, setAnalytics] = useState<UsageAnalytics | null>(null);
  const [period, setPeriod] = useState<AnalyticsPeriod>('30d');

  useEffect(() => {
    loadAnalytics();
  }, [period]);

  const loadAnalytics = async () => {
    const data = await analyticsService.getUsageAnalytics(period);
    setAnalytics(data);
  };

  return (
    <div className="analytics-dashboard">
      <AnalyticsHeader period={period} onPeriodChange={setPeriod} />
      
      <div className="analytics-grid">
        <MetricCard 
          title="–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"
          value={analytics?.activeUsers}
          change={analytics?.activeUsersChange}
        />
        
        <MetricCard 
          title="–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"
          value={analytics?.newUsers}
          change={analytics?.newUsersChange}
        />
        
        <MetricCard 
          title="–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏"
          value={analytics?.totalConsultations}
          change={analytics?.consultationsChange}
        />
        
        <MetricCard 
          title="–î–æ–∫—É–º–µ–Ω—Ç—ã"
          value={analytics?.documentsGenerated}
          change={analytics?.documentsChange}
        />
      </div>
      
      <AnalyticsCharts data={analytics} />
      <PopularFeatures data={analytics?.popularFeatures} />
    </div>
  );
};
```

### **6.2 –ü—Ä–∞–≤–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã**

#### **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –û—Ç—á–µ—Ç—ã –ø–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è–º
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–ø–æ—Ä–∞–º
- –ê–Ω–∞–ª–∏–∑ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–∞–≤–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- –û—Ç—á–µ—Ç—ã –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ AI

#### **User Stories:**

**US-017: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∞–≤–æ–≤–æ–≥–æ –æ—Ç—á–µ—Ç–∞**
```
–ö–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, —è —Ö–æ—á—É —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–æ–≤–æ–π –æ—Ç—á–µ—Ç,
—á—Ç–æ–±—ã –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π.

–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏:
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è–º
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Ç–æ—á–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤ AI
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø—Ä–∞–≤–æ–≤—ã–µ –æ–±–ª–∞—Å—Ç–∏
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
```

#### **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// src/lib/reports/legal-report-generator.ts
export class LegalReportGenerator {
  private analyticsService: AnalyticsService;
  private aiService: AIService;

  async generateLegalReport(
    period: AnalyticsPeriod
  ): Promise<LegalReport> {
    const analytics = await this.analyticsService.getLegalAnalytics(period);
    
    return {
      period,
      generatedAt: new Date(),
      summary: await this.generateSummary(analytics),
      consultations: await this.generateConsultationReport(analytics),
      documents: await this.generateDocumentReport(analytics),
      disputes: await this.generateDisputeReport(analytics),
      aiPerformance: await this.generateAIPerformanceReport(analytics),
      recommendations: await this.generateRecommendations(analytics)
    };
  }

  private async generateSummary(analytics: LegalAnalytics): Promise<ReportSummary> {
    return {
      totalConsultations: analytics.totalConsultations,
      totalDocuments: analytics.documentGenerationStats.total,
      totalDisputes: analytics.disputeResolutionStats.total,
      averageResponseTime: analytics.averageConsultationTime,
      userSatisfaction: await this.calculateUserSatisfaction(analytics),
      topLegalAreas: analytics.popularLegalAreas.slice(0, 5)
    };
  }

  private async generateRecommendations(
    analytics: LegalAnalytics
  ): Promise<ReportRecommendation[]> {
    const recommendations = [];

    // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –ø—Ä–∞–≤–∞
    if (analytics.popularLegalAreas[0]?.percentage > 40) {
      recommendations.push({
        type: 'content_expansion',
        priority: 'high',
        title: '–†–∞—Å—à–∏—Ä–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏',
        description: `–û–±–ª–∞—Å—Ç—å "${analytics.popularLegalAreas[0].name}" —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç ${analytics.popularLegalAreas[0].percentage}% –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤`,
        action: `–î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —à–∞–±–ª–æ–Ω–æ–≤ –∏ –ø—Ä–∏–º–µ—Ä–æ–≤ –ø–æ ${analytics.popularLegalAreas[0].name}`
      });
    }

    // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
    if (analytics.averageConsultationTime > 30000) { // 30 —Å–µ–∫—É–Ω–¥
      recommendations.push({
        type: 'performance_optimization',
        priority: 'medium',
        title: '–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ AI',
        description: `–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç ${analytics.averageConsultationTime}–º—Å`,
        action: '–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é RAG —Å–∏—Å—Ç–µ–º—ã –∏–ª–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ'
      });
    }

    return recommendations;
  }
}
```

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ LawerApp:

### **‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- **AI Legal Assistant** - —á–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, RAG —Å–∏—Å—Ç–µ–º–∞, –º–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- **Document Generator** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è
- **Dispute Manager** - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ø–æ—Ä–æ–≤, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- **Payment System** - —Ä–æ—Å—Å–∏–π—Å–∫–∏–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã, –ø–æ–¥–ø–∏—Å–∫–∏
- **User Management** - –ø—Ä–æ—Ñ–∏–ª–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **Analytics & Reports** - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –ø—Ä–∞–≤–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã

### **üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:**
- **User Stories** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** - –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏** - —á–µ—Ç–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ—É–Ω–∫—Ü–∏—è–º
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** - Telegram, TimeWeb Cloud, –ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ù–∞—á–∞–ª–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –Ω–∞ AI Legal Assistant! ü§ñ‚öñÔ∏è

---

*–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞: 16 –æ–∫—Ç—è–±—Ä—è 2025*  
*–í–µ—Ä—Å–∏—è: 1.0*  
*–°—Ç–∞—Ç—É—Å: –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ ‚úÖ*
