/**
 * –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è RAG —Å–∏—Å—Ç–µ–º—ã
 * –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–∞–≤–æ–≤–æ–π –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π
 */

import { RAGSystemFactory, RAGUtils, defaultRAGConfig } from './index';
import type { DocumentMetadata, ProcessingOptions } from './index';

/**
 * –ü—Ä–∏–º–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è RAG —Å–∏—Å—Ç–µ–º—ã
 */
export async function exampleRAGUsage() {
  try {
    // 1. –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    const configValidation = RAGUtils.validateConfig(defaultRAGConfig);
    if (!configValidation.isValid) {
      console.error('–û—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:', configValidation.errors);
      return;
    }

    // 2. –°–æ–∑–¥–∞–Ω–∏–µ RAG —Å–∏—Å—Ç–µ–º—ã
    const ragSystem = RAGSystemFactory.createRAGSystem(defaultRAGConfig);
    const { ragService, documentProcessor, vectorDbClient, objectStorageClient } = ragSystem;

    // 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
    await ragService.initialize();
    console.log('‚úÖ RAG —Å–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');

    // 4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    const stats = await ragService.getStats();
    console.log('üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã:', stats);

    // 5. –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    const documentId = RAGUtils.generateDocumentId('law');
    const mockDocument = createMockLegalDocument();
    
    const metadata: DocumentMetadata = {
      id: documentId,
      title: '–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–π –∫–æ–¥–µ–∫—Å –†–§ - –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è',
      originalName: 'gk-rf-osnovnye-polozheniya.pdf',
      legalArea: 'civil-law',
      documentType: 'law',
      source: '–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç –ì–æ—Å–¥—É–º—ã',
      tags: ['–≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–µ –ø—Ä–∞–≤–æ', '–∫–æ–¥–µ–∫—Å', '–æ—Å–Ω–æ–≤—ã'],
      fileSize: 1024 * 1024, // 1MB
      mimeType: 'application/pdf',
      uploadedAt: new Date().toISOString(),
      status: 'uploaded'
    };

    const processingOptions: ProcessingOptions = {
      chunkSize: 1000,
      chunkOverlap: 200,
      legalArea: 'civil-law',
      documentType: 'law',
      tags: ['–∫–æ–¥–µ–∫—Å', '–æ—Å–Ω–æ–≤—ã']
    };

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    const processingResult = await documentProcessor.processDocument(
      documentId,
      mockDocument,
      metadata,
      processingOptions
    );

    console.log('üìÑ –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞:', processingResult);

    // 6. –ü—Ä–∏–º–µ—Ä –ø–æ–∏—Å–∫–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞
    const query = {
      question: '–ö–∞–∫–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–≥–æ –ø—Ä–∞–≤–∞?',
      legalArea: 'civil-law' as const,
      maxResults: 5,
      threshold: 0.7
    };

    const ragResult = await ragService.query(query);
    console.log('üîç –†–µ–∑—É–ª—å—Ç–∞—Ç RAG –∑–∞–ø—Ä–æ—Å–∞:', {
      answer: ragResult.answer.substring(0, 200) + '...',
      sourcesCount: ragResult.sources.length,
      confidence: ragResult.confidence,
      legalReferences: ragResult.legalReferences,
      suggestedActions: ragResult.suggestedActions
    });

    // 7. –ü—Ä–∏–º–µ—Ä –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    const similarDocs = await ragService.searchSimilar(
      '–ø—Ä–∞–≤–∞ –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –≥—Ä–∞–∂–¥–∞–Ω',
      'civil-law'
    );
    console.log('üîé –ü–æ—Ö–æ–∂–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:', similarDocs.map((doc: Record<string, unknown>) => ({
      title: doc.title,
      relevance: doc.relevance,
      type: doc.type
    })));

    // 8. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    const processingStats = await documentProcessor.getProcessingStats();
    console.log('üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏:', processingStats);

    return {
      success: true,
      stats,
      processingResult,
      ragResult,
      similarDocs,
      processingStats
    };

  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –≤ –ø—Ä–∏–º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è RAG:', error);
    return {
      success: false,
      error: error instanceof Error ? error.message : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'
    };
  }
}

/**
 * –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–∫-–¥–æ–∫—É–º–µ–Ω—Ç–∞ –¥–ª—è –¥–µ–º–æ
 */
function createMockLegalDocument(): Buffer {
  const mockText = `
–ì–†–ê–ñ–î–ê–ù–°–ö–ò–ô –ö–û–î–ï–ö–° –†–û–°–°–ò–ô–°–ö–û–ô –§–ï–î–ï–†–ê–¶–ò–ò

–ß–ê–°–¢–¨ –ü–ï–†–í–ê–Ø

–†–∞–∑–¥–µ–ª I. –û–ë–©–ò–ï –ü–û–õ–û–ñ–ï–ù–ò–Ø

–ü–æ–¥—Ä–∞–∑–¥–µ–ª 1. –û–°–ù–û–í–ù–´–ï –ü–û–õ–û–ñ–ï–ù–ò–Ø

–ì–ª–∞–≤–∞ 1. –ì–†–ê–ñ–î–ê–ù–°–ö–û–ï –ó–ê–ö–û–ù–û–î–ê–¢–ï–õ–¨–°–¢–í–û

–°—Ç–∞—Ç—å—è 1. –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—á–∞–ª–∞ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–≥–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞

1. –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ –æ—Å–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–∏–∑–Ω–∞–Ω–∏–∏ —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Ä–µ–≥—É–ª–∏—Ä—É–µ–º—ã—Ö –∏–º –æ—Ç–Ω–æ—à–µ–Ω–∏–π, –Ω–µ–ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–Ω–æ—Å—Ç–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, —Å–≤–æ–±–æ–¥—ã –¥–æ–≥–æ–≤–æ—Ä–∞, –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∫–æ–≥–æ-–ª–∏–±–æ –≤ —á–∞—Å—Ç–Ω—ã–µ –¥–µ–ª–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –±–µ—Å–ø—Ä–µ–ø—è—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏—è –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏—Ö –ø—Ä–∞–≤, –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞—Ä—É—à–µ–Ω–Ω—ã—Ö –ø—Ä–∞–≤, –∏—Ö —Å—É–¥–µ–±–Ω–æ–π –∑–∞—â–∏—Ç—ã.

2. –ì—Ä–∞–∂–¥–∞–Ω–µ (—Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –ª–∏—Ü–∞) –∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –ª–∏—Ü–∞ –ø—Ä–∏–æ–±—Ä–µ—Ç–∞—é—Ç –∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è—é—Ç —Å–≤–æ–∏ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–µ –ø—Ä–∞–≤–∞ —Å–≤–æ–µ–π –≤–æ–ª–µ–π –∏ –≤ —Å–≤–æ–µ–º –∏–Ω—Ç–µ—Ä–µ—Å–µ. –û–Ω–∏ —Å–≤–æ–±–æ–¥–Ω—ã –≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–≤–æ–∏—Ö –ø—Ä–∞–≤ –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ–≥–æ–≤–æ—Ä–∞ –∏ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –ª—é–±—ã—Ö –Ω–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∞—â–∏—Ö –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É —É—Å–ª–æ–≤–∏–π –¥–æ–≥–æ–≤–æ—Ä–∞.

3. –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏, –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏–∏ –∏ –∑–∞—â–∏—Ç–µ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏—Ö –ø—Ä–∞–≤ –∏ –ø—Ä–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏—Ö –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏—Ö –ø—Ä–∞–≤–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–π –¥–æ–ª–∂–Ω—ã –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω–æ.

4. –ù–∏–∫—Ç–æ –Ω–µ –≤–ø—Ä–∞–≤–µ –∏–∑–≤–ª–µ–∫–∞—Ç—å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –∏–∑ —Å–≤–æ–µ–≥–æ –Ω–µ–∑–∞–∫–æ–Ω–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ–¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è.

5. –¢–æ–≤–∞—Ä—ã, —É—Å–ª—É–≥–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ —Å–≤–æ–±–æ–¥–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è –Ω–∞ –≤—Å–µ–π —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏.

–°—Ç–∞—Ç—å—è 2. –û—Ç–Ω–æ—à–µ–Ω–∏—è, —Ä–µ–≥—É–ª–∏—Ä—É–µ–º—ã–µ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–º –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º

1. –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∞–≤–æ–≤–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–≥–æ –æ–±–æ—Ä–æ—Ç–∞, –æ—Å–Ω–æ–≤–∞–Ω–∏—è –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –∏ –ø–æ—Ä—è–¥–æ–∫ –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –¥—Ä—É–≥–∏—Ö –≤–µ—â–Ω—ã—Ö –ø—Ä–∞–≤, –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∏—Ä–∞–≤–Ω–µ–Ω–Ω—ã–µ –∫ –Ω–∏–º —Å—Ä–µ–¥—Å—Ç–≤–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª–∏–∑–∞—Ü–∏–∏ (–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö –ø—Ä–∞–≤), —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç –¥–æ–≥–æ–≤–æ—Ä–Ω—ã–µ –∏ –∏–Ω—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞, –∞ —Ç–∞–∫–∂–µ –¥—Ä—É–≥–∏–µ –∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º–∏ –ª–∏—á–Ω—ã–µ –Ω–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ —Ä–∞–≤–µ–Ω—Å—Ç–≤–µ, –∞–≤—Ç–æ–Ω–æ–º–∏–∏ –≤–æ–ª–∏ –∏ –∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.

2. –£—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ —Ä–µ–≥—É–ª–∏—Ä—É–µ–º—ã—Ö –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–º –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –æ—Ç–Ω–æ—à–µ–Ω–∏–π —è–≤–ª—è—é—Ç—Å—è –≥—Ä–∞–∂–¥–∞–Ω–µ, —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –ª–∏—Ü–∞, –†–æ—Å—Å–∏–π—Å–∫–∞—è –§–µ–¥–µ—Ä–∞—Ü–∏—è, —Å—É–±—ä–µ–∫—Ç—ã –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏ –∏ –º—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è.

3. –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –ª–∏—Ü–∞–º–∏, –æ—Å—É—â–µ—Å—Ç–≤–ª—è—é—â–∏–º–∏ –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å–∫—É—é –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∏–ª–∏ —Å –∏—Ö —É—á–∞—Å—Ç–∏–µ–º, –∏—Å—Ö–æ–¥—è –∏–∑ —Ç–æ–≥–æ, —á—Ç–æ –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å–∫–æ–π —è–≤–ª—è–µ—Ç—Å—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è, –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ–º–∞—è –Ω–∞ —Å–≤–æ–π —Ä–∏—Å–∫ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –Ω–∞ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–º—É—â–µ—Å—Ç–≤–æ–º, –ø—Ä–æ–¥–∞–∂–∏ —Ç–æ–≤–∞—Ä–æ–≤, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç –∏–ª–∏ –æ–∫–∞–∑–∞–Ω–∏—è —É—Å–ª—É–≥ –ª–∏—Ü–∞–º–∏, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –≤ —ç—Ç–æ–º –∫–∞—á–µ—Å—Ç–≤–µ –≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º –∑–∞–∫–æ–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.

4. –ö –∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–º –Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–º –∏–ª–∏ –∏–Ω–æ–º –≤–ª–∞—Å—Ç–Ω–æ–º –ø–æ–¥—á–∏–Ω–µ–Ω–∏–∏ –æ–¥–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –¥—Ä—É–≥–æ–π, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∫ –Ω–∞–ª–æ–≥–æ–≤—ã–º –∏ –¥—Ä—É–≥–∏–º —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–º –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º, –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è, –µ—Å–ª–∏ –∏–Ω–æ–µ –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º.

–°—Ç–∞—Ç—å—è 3. –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ –∏ –∏–Ω—ã–µ –∞–∫—Ç—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –Ω–æ—Ä–º—ã –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–≥–æ –ø—Ä–∞–≤–∞

1. –í —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ö–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏–µ–π –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏ –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –≤–µ–¥–µ–Ω–∏–∏ –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏.

2. –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –ö–æ–¥–µ–∫—Å–∞ –∏ –ø—Ä–∏–Ω—è—Ç—ã—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –Ω–∏–º –∏–Ω—ã—Ö —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω—ã—Ö –∑–∞–∫–æ–Ω–æ–≤ (–¥–∞–ª–µ–µ - –∑–∞–∫–æ–Ω—ã), —Ä–µ–≥—É–ª–∏—Ä—É—é—â–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ –ø—É–Ω–∫—Ç–∞—Ö 1 –∏ 2 —Å—Ç–∞—Ç—å–∏ 2 –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –ö–æ–¥–µ–∫—Å–∞.

3. –ù–æ—Ä–º—ã –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–≥–æ –ø—Ä–∞–≤–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ—Å—è –≤ –¥—Ä—É–≥–∏—Ö –∑–∞–∫–æ–Ω–∞—Ö, –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–µ–º—É –ö–æ–¥–µ–∫—Å—É.

4. –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–µ –ø—Ä–∞–≤–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–æ–≥—É—Ç —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è —Ç–∞–∫–∂–µ —É–∫–∞–∑–∞–º–∏ –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞ –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç—å –Ω–∞—Å—Ç–æ—è—â–µ–º—É –ö–æ–¥–µ–∫—Å—É –∏ –∏–Ω—ã–º –∑–∞–∫–æ–Ω–∞–º.

5. –ù–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –∏ –≤–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –ö–æ–¥–µ–∫—Å–∞ –∏ –∏–Ω—ã—Ö –∑–∞–∫–æ–Ω–æ–≤, —É–∫–∞–∑–æ–≤ –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞ –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏ –ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏ –≤–ø—Ä–∞–≤–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –Ω–æ—Ä–º—ã –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–≥–æ –ø—Ä–∞–≤–∞ –ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.

6. –í —Å–ª—É—á–∞–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è —É–∫–∞–∑–∞ –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞ –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏ –∏–ª–∏ –ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏ –Ω–∞—Å—Ç–æ—è—â–µ–º—É –ö–æ–¥–µ–∫—Å—É –∏–ª–∏ –∏–Ω–æ–º—É –∑–∞–∫–æ–Ω—É –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞—Å—Ç–æ—è—â–∏–π –ö–æ–¥–µ–∫—Å –∏–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∑–∞–∫–æ–Ω.

7. –ê–∫—Ç—ã —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω—ã—Ö –æ—Ä–≥–∞–Ω–æ–≤ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –≤–ª–∞—Å—Ç–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –Ω–æ—Ä–º—ã –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–≥–æ –ø—Ä–∞–≤–∞, –Ω–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç—å –Ω–∞—Å—Ç–æ—è—â–µ–º—É –ö–æ–¥–µ–∫—Å—É, –∏–Ω—ã–º –∑–∞–∫–æ–Ω–∞–º, —É–∫–∞–∑–∞–º –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞ –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏ –∏ –ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è–º –ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏.

8. –û–±—ã—á–∞–∏, –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∞—â–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –ø–æ–ª–æ–∂–µ–Ω–∏—è–º –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∏–ª–∏ –¥–æ–≥–æ–≤–æ—Ä—É, –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è.

9. –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ –ø—É–Ω–∫—Ç–∞—Ö 1 –∏ 2 —Å—Ç–∞—Ç—å–∏ 2 –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –ö–æ–¥–µ–∫—Å–∞, –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ, –∫—Ä–æ–º–µ —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –∏–∑ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞ —Å–ª–µ–¥—É–µ—Ç, —á—Ç–æ –¥–ª—è –µ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–∑–¥–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏–≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∞–∫—Ç–∞.

10. –ï—Å–ª–∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–º –¥–æ–≥–æ–≤–æ—Ä–æ–º –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞, —á–µ–º —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–º –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º, –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª–∞ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞.
  `;

  return Buffer.from(mockText, 'utf-8');
}

/**
 * –ü—Ä–∏–º–µ—Ä –º–∞—Å—Å–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
 */
export async function exampleBatchProcessing() {
  try {
    const ragSystem = RAGSystemFactory.createRAGSystem(defaultRAGConfig);
    const { documentProcessor } = ragSystem;

    // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
    const documents = [
      {
        id: RAGUtils.generateDocumentId('law'),
        file: createMockLegalDocument(),
        metadata: {
          id: RAGUtils.generateDocumentId('law'),
          title: '–ì–ö –†–§ - –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è',
          originalName: 'gk-rf-osnovnye.pdf',
          legalArea: 'civil-law',
          documentType: 'law' as const,
          source: '–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç',
          tags: ['–≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–µ –ø—Ä–∞–≤–æ', '–∫–æ–¥–µ–∫—Å'],
          fileSize: 1024 * 1024,
          mimeType: 'application/pdf',
          uploadedAt: new Date().toISOString(),
          status: 'uploaded' as const
        },
        options: {
          chunkSize: 1000,
          chunkOverlap: 200,
          legalArea: 'civil-law',
          documentType: 'law'
        }
      },
      {
        id: RAGUtils.generateDocumentId('precedent'),
        file: createMockLegalDocument(),
        metadata: {
          id: RAGUtils.generateDocumentId('precedent'),
          title: '–ü–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –í–° –†–§ –æ –∑–∞—â–∏—Ç–µ –ø—Ä–∞–≤ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π',
          originalName: 'vs-rf-potreb.pdf',
          legalArea: 'consumer-rights',
          documentType: 'precedent' as const,
          source: '–í–µ—Ä—Ö–æ–≤–Ω—ã–π –°—É–¥ –†–§',
          tags: ['–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å', '–ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç'],
          fileSize: 512 * 1024,
          mimeType: 'application/pdf',
          uploadedAt: new Date().toISOString(),
          status: 'uploaded' as const
        },
        options: {
          chunkSize: 800,
          chunkOverlap: 150,
          legalArea: 'consumer-rights',
          documentType: 'precedent'
        }
      }
    ];

    // –ú–∞—Å—Å–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
    const results = await documentProcessor.processDocumentsBatch(documents);
    
    console.log('üì¶ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–∞—Å—Å–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏:', results);
    
    return results;
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –º–∞—Å—Å–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏:', error);
    throw error;
  }
}

/**
 * –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å —É—Ç–∏–ª–∏—Ç–∞–º–∏
 */
export function exampleUtils() {
  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID
  const docId = RAGUtils.generateDocumentId('law');
  const chunkId = RAGUtils.generateChunkId(docId, 0);
  
  console.log('üÜî –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ID:', { docId, chunkId });

  // –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
  const text = '  –≠—Ç–æ   —Ç–µ—Å—Ç–æ–≤—ã–π   —Ç–µ–∫—Å—Ç!!!  ';
  const normalized = RAGUtils.normalizeText(text);
  console.log('üìù –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞:', { original: text, normalized });

  // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
  const keywords = RAGUtils.extractKeywords(
    '–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–µ –ø—Ä–∞–≤–æ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –≥—Ä–∞–∂–¥–∞–Ω–∞–º–∏ –∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–º–∏ –ª–∏—Ü–∞–º–∏',
    5
  );
  console.log('üîë –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:', keywords);

  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç–∏ –ø—Ä–∞–≤–∞
  const legalArea = RAGUtils.detectLegalArea(
    '–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä'
  );
  console.log('‚öñÔ∏è –û–±–ª–∞—Å—Ç—å –ø—Ä–∞–≤–∞:', legalArea);

  // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  const fileSize = RAGUtils.formatFileSize(1024 * 1024 * 5); // 5MB
  const processingTime = RAGUtils.formatProcessingTime(125000); // 2m 5s
  console.log('üìä –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:', { fileSize, processingTime });

  return {
    docId,
    chunkId,
    normalized,
    keywords,
    legalArea,
    fileSize,
    processingTime
  };
}

// –≠–∫—Å–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
export default {
  exampleRAGUsage,
  exampleBatchProcessing,
  exampleUtils
};
